class local2json{constructor(a){this.name=a,this.tables=[],localStorage.getItem(a)&&(this.tables=JSON.parse(localStorage.getItem(a)))}Save(){localStorage.setItem(this.name,JSON.stringify(this.tables))}NewTable(a){const b=this.tables.length;for(let c=0;c<b;c++)if(this.tables[c].name==a)return!1;return this.tables.push({name:a,data:[],index:this.tables.length}),this.Save(),!0}GetTable(a){let b={items:[],index:0};const c=this.tables.length;for(let d=0;d<c;d++)if(this.tables[d].name==a){b.items=this.tables[d].data,b.index=d;break}return b}UpdateTable(a,b){const c=this.tables.length;for(let d=0;d<c;d++)if(this.tables[d].name==a)return this.tables[d].data=b,this.Save(),!0;return!1}DeteleTable(a){const b=this.tables.length;for(let c=0;c<b;c++)if(this.tables[c].name==a)return tables.splice(c,1),this.Save(),!0;return!1}InsertItem(a,b){const c=this.tables.length;for(let d=0;d<c;d++)if(this.tables[d].name==a)return this.tables[d].data.push(b),this.Save(),!0;return!1}ClearObject(a){let b=JSON.stringify(a),c="";return b=b.replace("{",""),b=b.replace("}",""),Array.from(b).map(a=>{"\""!=a&&"\\"!=a&&(c+=a)}),c}IsValidQuestion(a,b,c){let d=!1;return"=="===a?d=b==c:"==="===a?d=b===c:"<"===a?d=b<c:"<="===a?d=b<=c:">"===a?d=b>c:">="===a?d=b>=c:"!="===a?d=b!=c:"%%"===a?d=-1<c.indexOf(b):void 0,d}GetItem(a,b){const c=this.GetTable(a),d=c.items.length;let e=[];const f=b.split(" ",10)[0],g=b.split(" ",10)[2],h=b.split(" ",10)[1];for(let j=0;j<d;j++){const a=this.ClearObject(c.items[j]),b=a.split(",",500);for(let a=0;a<b.length;a++)if(b[a].split(":")[0]==f){const d=b[a].split(":")[1];this.IsValidQuestion(h,g,d)&&(e.push(c.items[j]),a=b.length)}}return e}DeleteItem(a,b){const c=this.GetTable(a),d=c.items.length;const e=b.split(" ",10)[0],f=b.split(" ",10)[2],g=b.split(" ",10)[1];for(let h=0;h<d;h++){const a=this.ClearObject(c.items[h]),b=a.split(",",500);for(let a=0;a<b.length;a++)if(b[a].split(":")[0]==e){const d=b[a].split(":")[1];if(this.IsValidQuestion(g,f,d))return this.tables[c.index].data.splice(c[h],1),this.Save(),!0}}return!1}UpdateItem(a,b,c){const d=this.GetTable(a),e=d.items.length;const f=b.split(" ",10)[0],g=b.split(" ",10)[2],h=b.split(" ",10)[1];for(let j=0;j<e;j++){const a=this.ClearObject(d.items[j]),b=a.split(",",500);for(let a=0;a<b.length;a++)if(b[a].split(":")[0]==f){const e=b[a].split(":")[1];if(this.IsValidQuestion(h,g,e))return this.tables[d.index].data[j]=c,this.Save(),!0}}return!1}}